{
 "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
 "contentVersion": "1.0.0.0",
 "parameters": {
  "subscriptionid": { "type": "string" },
  "resourcegroupname": { "type": "string" },
  "appinsightname": { "type": "string" },
  "resourcelocation": { "type": "string" },
  "appinsightresourceid": { "type": "string" },
  "dashboardresourceid": { "type": "string" }
 },
 "resources": [
{
  "properties": {
    "lenses": {
      "0": {
        "order": 0,
        "parts": {
          "0": {
            "position": {
              "x": 0,
              "y": 0,
              "colSpan": 7,
              "rowSpan": 8
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "8c510a6c-fe3d-4ad7-99b8-09e455a4f02a",
                    "ResourceGroup": "[parameters('resourcegroupname')]",
                    "Name": "[parameters('appinsightname')]",
                    "ResourceId": "[parameters('appinsightresourceid')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "client_Browser",
                      "type": "string"
                    },
                    "yAxis": [
                      {
                        "name": "Count_client_Browser",
                        "type": "long"
                      }
                    ],
                    "splitBy": [],
                    "aggregation": "Sum"
                  },
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "// Page views filtered to browsers used (RAW data)\r\npageViews\r\n| project client_Browser, aadTenantId=customDimensions.aadTenantId, companyName=customDimensions.companyName, environmentName=customDimensions.environmentName\r\n| summarize Count_client_Browser=count() by client_Browser\r\n| render barchart  \r\n\n",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appinsightname')]",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "value": "36ea94ed-26b2-4b82-a100-6ed9cc883860",
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "value": "P1D",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "FrameControlChart",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "value": "StackedBar",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Usage per browser",
                  "PartSubTitle": "Date filter"
                }
              }
            }
          },
          "1": {
            "position": {
              "x": 7,
              "y": 0,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "8c510a6c-fe3d-4ad7-99b8-09e455a4f02a",
                    "ResourceGroup": "[parameters('resourcegroupname')]",
                    "Name": "[parameters('appinsightname')]",
                    "ResourceId": "[parameters('appinsightresourceid')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "client_Type",
                      "type": "string"
                    },
                    "yAxis": [
                      {
                        "name": "Count_client_Browser",
                        "type": "long"
                      }
                    ],
                    "splitBy": [],
                    "aggregation": "Sum"
                  },
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "pageViews\r\n| project client_Type, aadTenantId=customDimensions.aadTenantId, companyName=customDimensions.companyName, environmentName=customDimensions.environmentName\r\n| summarize Count_client_Browser=count() by client_Type\r\n| render barchart \r\n\n",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appinsightname')]",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "value": "32e33949-0ee0-4ec8-a144-f894fb4c0ddd",
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "value": "P1D",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "FrameControlChart",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "value": "StackedBar",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Usage per client Type",
                  "PartSubTitle": "Date filter"
                }
              }
            }
          },
          "2": {
            "position": {
              "x": 13,
              "y": 0,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "8c510a6c-fe3d-4ad7-99b8-09e455a4f02a",
                    "ResourceGroup": "[parameters('resourcegroupname')]",
                    "Name": "[parameters('appinsightname')]",
                    "ResourceId": "[parameters('appinsightresourceid')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "client_Type",
                      "type": "string"
                    },
                    "yAxis": [
                      {
                        "name": "ItemCount",
                        "type": "long"
                      }
                    ],
                    "splitBy": [],
                    "aggregation": "Sum"
                  },
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "pageViews\r\n| where timestamp > ago(3d) // change if your retention policy is different than the default\r\n| extend client_Type = tostring(customDimensions.clientType )\r\n| summarize ItemCount=count() by client_Type\r\n| render barchart \r\n",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appinsightname')]",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "value": "125fcd49-837c-47b1-af15-e5825f07de43",
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "FrameControlChart",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "value": "StackedBar",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Usage by Client Type",
                  "PartSubTitle": "Date filter"
                }
              }
            }
          },
          "3": {
            "position": {
              "x": 7,
              "y": 4,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "8c510a6c-fe3d-4ad7-99b8-09e455a4f02a",
                    "ResourceGroup": "[parameters('resourcegroupname')]",
                    "Name": "[parameters('appinsightname')]",
                    "ResourceId": "[parameters('appinsightresourceid')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "client_OS",
                      "type": "string"
                    },
                    "yAxis": [
                      {
                        "name": "Count_client_Browser",
                        "type": "long"
                      }
                    ],
                    "splitBy": [],
                    "aggregation": "Sum"
                  },
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "pageViews\r\n| project client_OS, aadTenantId=customDimensions.aadTenantId, companyName=customDimensions.companyName, environmentName=customDimensions.environmentName\r\n| summarize Count_client_Browser=count() by client_OS\r\n| render barchart \r\n\n",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appinsightname')]",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "value": "4009b632-5e3d-42dc-bc25-b9be64141f27",
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "value": "P1D",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "FrameControlChart",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "value": "StackedBar",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Usage by Client OS",
                  "PartSubTitle": "Date filter"
                }
              }
            }
          },
          "4": {
            "position": {
              "x": 13,
              "y": 4,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "8c510a6c-fe3d-4ad7-99b8-09e455a4f02a",
                    "ResourceGroup": "[parameters('resourcegroupname')]",
                    "Name": "[parameters('appinsightname')]",
                    "ResourceId": "[parameters('appinsightresourceid')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "client_CountryOrRegion",
                      "type": "string"
                    },
                    "yAxis": [
                      {
                        "name": "Count_client_Browser",
                        "type": "long"
                      }
                    ],
                    "splitBy": [],
                    "aggregation": "Sum"
                  },
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "pageViews\r\n| project client_CountryOrRegion, aadTenantId=customDimensions.aadTenantId, companyName=customDimensions.companyName, environmentName=customDimensions.environmentName\r\n| summarize Count_client_Browser=count() by client_CountryOrRegion\r\n| render barchart \r\n\n",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appinsightname')]",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "value": "4e851f5d-930a-4af2-b103-68ca71dbb3ad",
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "value": "P1D",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "FrameControlChart",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "value": "StackedBar",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Usage by Country",
                  "PartSubTitle": "Date filter"
                }
              }
            }
          },
          "5": {
            "position": {
              "x": 0,
              "y": 8,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "8c510a6c-fe3d-4ad7-99b8-09e455a4f02a",
                    "ResourceGroup": "[parameters('resourcegroupname')]",
                    "Name": "[parameters('appinsightname')]",
                    "ResourceId": "[parameters('appinsightresourceid')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "componentVersion",
                      "type": "string"
                    },
                    "yAxis": [
                      {
                        "name": "Count",
                        "type": "long"
                      }
                    ],
                    "splitBy": [],
                    "aggregation": "Sum"
                  },
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "traces\r\n| where timestamp > ago(60d)\r\n| where customDimensions.environmentType == 'Production'\r\n| extend component = tostring( customDimensions.component )\r\n| extend componentVersion = tostring( customDimensions.componentVersion )\r\n| extend itemCount = itemCount\r\n| extend aadTenantId = tostring(customDimensions.aadTenantId)\r\n| distinct componentVersion, aadTenantId\r\n| summarize Count=count() by componentVersion\r\n| order by Count desc \r\n| render columnchart \n",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appinsightname')]",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "value": "0e545889-fae2-40fa-a15d-7e268d622500",
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "FrameControlChart",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "value": "StackedColumn",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Version Types",
                  "PartSubTitle": "Date filter >30 days",
                  "Query": "traces\n| where timestamp > ago(30d)\n| where customDimensions.environmentType == 'Production'\n| extend component = tostring( customDimensions.component )\n| extend componentVersion = tostring( customDimensions.componentVersion )\n| extend itemCount = itemCount\n| extend aadTenantId = tostring(customDimensions.aadTenantId)\n| distinct componentVersion, aadTenantId\n| summarize Count=count() by componentVersion\n| order by Count desc \n| render columnchart \n"
                }
              }
            }
          },
          "6": {
            "position": {
              "x": 0,
              "y": 12,
              "colSpan": 8,
              "rowSpan": 6
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "8c510a6c-fe3d-4ad7-99b8-09e455a4f02a",
                    "ResourceGroup": "[parameters('resourcegroupname')]",
                    "Name": "[parameters('appinsightname')]",
                    "ResourceId": "[parameters('appinsightresourceid')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "object",
                      "type": "string"
                    },
                    "yAxis": [
                      {
                        "name": "CountByObjectName",
                        "type": "long"
                      }
                    ],
                    "splitBy": [],
                    "aggregation": "Sum"
                  },
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "traces\r\n| where operation_Name == 'Long Running Operation (SQL Query)' // do note that in a later version of the schema, this field will not be used \r\n     or customDimensions.eventId == 'RT0005' // starting from version 16.1, the eventId is used to identity signal types\r\n| where customDimensions.alObjectId <> 357 and customDimensions.alObjectId <> 0\r\n| summarize CountByObjectName=count() by object=strcat(customDimensions.alObjectType,' - ',customDimensions.alObjectName)\r\n| top 10 by CountByObjectName\r\n|render piechart \n",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appinsightname')]",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "value": "04720e7b-16fc-4a32-b104-e2771b10f39b",
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "value": "P7D",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "FrameControlChart",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "value": "Pie",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Long Running Queries",
                  "PartSubTitle": "Date filter",
                  "Query": "traces\n| where operation_Name == 'Long Running Operation (SQL Query)' // do note that in a later version of the schema, this field will not be used \n     or customDimensions.eventId == 'RT0005' // starting from version 16.1, the eventId is used to identity signal types\n| where customDimensions.alObjectId <> 357 and customDimensions.alObjectId <> 0\n| where customDimensions.environmentType == 'Production'\n| summarize CountByObjectName=count() by object=strcat(customDimensions.alObjectType,' - ',customDimensions.alObjectName)\n| top 10 by CountByObjectName\n|render piechart \n"
                }
              }
            }
          },
          "7": {
            "position": {
              "x": 8,
              "y": 12,
              "colSpan": 11,
              "rowSpan": 6
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "8c510a6c-fe3d-4ad7-99b8-09e455a4f02a",
                    "ResourceGroup": "[parameters('resourcegroupname')]",
                    "Name": "[parameters('appinsightname')]",
                    "ResourceId": "[parameters('appinsightresourceid')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "let lastMonthsCounts =\r\ntraces\r\n| where timestamp > ago(14d) \r\n| where timestamp <= ago(7d) \r\n| where operation_Name == 'Long Running Operation (SQL Query)' // do note that in a later version of the schema, this field will not be used \r\n     or customDimensions.eventId == 'RT0005' // starting from version 16.1, the eventId is used to identity signal types\r\n| where customDimensions.alObjectId > 0 // filter out internal server calls\r\n| extend aadId = tostring( customDimensions.aadTenantId )\r\n, environmentName = tostring( customDimensions.environmentName )\r\n, companyName = tostring( customDimensions.companyName )\r\n| summarize last_week_count=count() by aadId, environmentName, companyName \r\n;\r\nlet thisMonthsCounts =\r\ntraces\r\n| where timestamp > ago(7d) \r\n| where operation_Name == 'Long Running Operation (SQL Query)' // do note that in a later version of the schema, this field will not be used \r\n//     or customDimensions.eventId == 'RT0005' // starting from version 16.1, the eventId is used to identity signal types\r\n//| where customDimensions.eventId == 'RT0005'\r\n| where customDimensions.alObjectId > 0 // filter out internal server calls\r\n| extend aadId = tostring( customDimensions.aadTenantId )\r\n, environmentName = tostring( customDimensions.environmentName )\r\n, companyName = tostring( customDimensions.companyName )\r\n| summarize this_week_count=count() by aadId, environmentName, companyName \r\n;\r\nlastMonthsCounts \r\n| join kind=inner ( thisMonthsCounts ) \r\n    on $left.aadId == $right.aadId and $left.environmentName == $right.environmentName and $left.companyName == $right.companyName\r\n    | sort by this_week_count desc\r\n    | top 20 by this_week_count\r\n\n",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appinsightname')]",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "value": "36faca0a-5a3e-4e04-a6a8-3673b8eb31b7",
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "AnalyticsGrid",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Long Running Queries Compare",
                  "PartSubTitle": "<7days and >7days<14days",
                  "Query": "let lastMonthsCounts =\ntraces\n| where timestamp > ago(14d) \n| where timestamp <= ago(7d) \n| where operation_Name == 'Long Running Operation (SQL Query)' // do note that in a later version of the schema, this field will not be used \n     or customDimensions.eventId == 'RT0005' // starting from version 16.1, the eventId is used to identity signal types\n| where customDimensions.alObjectId > 0 // filter out internal server calls\n| where customDimensions.environmentType == 'Production'\n| extend aadId = tostring( customDimensions.aadTenantId )\n, environmentName = tostring( customDimensions.environmentName )\n, companyName = tostring( customDimensions.companyName )\n| summarize last_week_count=count() by aadId, environmentName, companyName \n;\nlet thisMonthsCounts =\ntraces\n| where timestamp > ago(7d) \n| where operation_Name == 'Long Running Operation (SQL Query)' // do note that in a later version of the schema, this field will not be used \n//     or customDimensions.eventId == 'RT0005' // starting from version 16.1, the eventId is used to identity signal types\n//| where customDimensions.eventId == 'RT0005'\n| where customDimensions.alObjectId > 0 // filter out internal server calls\n| where customDimensions.environmentType == 'Production'\n| extend aadId = tostring( customDimensions.aadTenantId )\n, environmentName = tostring( customDimensions.environmentName )\n, companyName = tostring( customDimensions.companyName )\n| summarize this_week_count=count() by aadId, environmentName, companyName \n;\nlastMonthsCounts \n| join kind=inner ( thisMonthsCounts ) \n    on $left.aadId == $right.aadId and $left.environmentName == $right.environmentName and $left.companyName == $right.companyName\n    | sort by this_week_count desc\n    | top 20 by this_week_count\n\n",
                  "GridColumnsWidth": {
                    "last_week_count": "81px",
                    "environmentName": "88px",
                    "environmentName1": "96px",
                    "this_week_count": "68px"
                  }
                }
              }
            }
          },
          "8": {
            "position": {
              "x": 0,
              "y": 18,
              "colSpan": 19,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "8c510a6c-fe3d-4ad7-99b8-09e455a4f02a",
                    "ResourceGroup": "[parameters('resourcegroupname')]",
                    "Name": "[parameters('appinsightname')]",
                    "ResourceId": "[parameters('appinsightresourceid')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "// SQL stats \r\ntraces\r\n| where timestamp > ago(7d) // adjust as needed\r\n| where operation_Name == 'Long Running Operation (SQL Query)' // do note that in a later version of the schema, this field will not be used (a new field in custom dimensions will be used)\r\n// | where customDimensions.eventCode == 'TODO - coming in a later version of the schema'\r\n| where customDimensions.alObjectId > 0 // filter out internal server calls\r\n| extend aadID = tostring( customDimensions.aadTenantId )\r\n| extend sqlStatement = tostring( customDimensions.sqlStatement )\r\n| extend environmentName=cloud_RoleInstance \r\n, environmentType = tostring( customDimensions.environmentType )\r\n, alObjectId = customDimensions.alObjectId\r\n, alObjectName = tostring( customDimensions.alObjectName )\r\n, alObjectType = tostring( customDimensions.alObjectType )\r\n, clientType = tostring( customDimensions.clientType )\r\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \r\n, extensionName = tostring( customDimensions.extensionName )\r\n, extensionVersion = tostring( customDimensions.extensionVersion )\r\n, numberOfJoins = countof(sqlStatement, \"JOIN\") \r\n, numberOfOuterApplys = countof(sqlStatement, \"OUTER APPLY\") \r\n, alStackTrace = tostring( customDimensions.alStackTrace )\r\n| where environmentType == 'Production'\r\n| summarize totalexecutionTimeInSec = sum(executionTimeInMS)/1000, countOfExecutions = count() by extensionName, extensionVersion,alObjectName, sqlStatement, numberOfJoins, numberOfOuterApplys, alStackTrace\r\n| project extensionName, extensionVersion, alObjectName, sqlStatement, countOfExecutions, totalexecutionTimeInSec, numberOfJoins, numberOfOuterApplys, alStackTrace\r\n| order by totalexecutionTimeInSec desc\n",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appinsightname')]",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "value": "13762dc1-85b9-46f5-b703-49d5c01217c0",
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "AnalyticsGrid",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Long Running Queries",
                  "PartSubTitle": "Date filter",
                  "Query": "// SQL stats \ntraces\n| where customDimensions.eventId == 'RT0005'\n| where customDimensions.alObjectId > 0 // filter out internal server calls\n| where customDimensions.environmentType == 'Production'\n| extend aadID = tostring( customDimensions.aadTenantId )\n| extend sqlStatement = tostring( customDimensions.sqlStatement )\n| extend environmentName=cloud_RoleInstance \n, environmentType = tostring( customDimensions.environmentType )\n, alObjectId = customDimensions.alObjectId\n, alObjectName = tostring( customDimensions.alObjectName )\n, alObjectType = tostring( customDimensions.alObjectType )\n, clientType = tostring( customDimensions.clientType )\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n, extensionName = tostring( customDimensions.extensionName )\n, extensionVersion = tostring( customDimensions.extensionVersion )\n, numberOfJoins = countof(sqlStatement, \"JOIN\") \n, numberOfOuterApplys = countof(sqlStatement, \"OUTER APPLY\") \n, alStackTrace = tostring( customDimensions.alStackTrace )\n| where environmentType == 'Production'\n| summarize totalexecutionTimeInSec = sum(executionTimeInMS)/1000, countOfExecutions = count() by extensionName, extensionVersion,alObjectName, sqlStatement, numberOfJoins, numberOfOuterApplys, alStackTrace\n| project extensionName, extensionVersion, alObjectName, sqlStatement, countOfExecutions, totalexecutionTimeInSec, numberOfJoins, numberOfOuterApplys, alStackTrace\n| order by countOfExecutions desc\n",
                  "GridColumnsWidth": {
                    "alObjectName": "226px",
                    "sqlStatement": "230px",
                    "alStackTrace": "277px"
                  }
                }
              }
            }
          },
          "9": {
            "position": {
              "x": 0,
              "y": 22,
              "colSpan": 19,
              "rowSpan": 3
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "8c510a6c-fe3d-4ad7-99b8-09e455a4f02a",
                    "ResourceGroup": "[parameters('resourcegroupname')]",
                    "Name": "[parameters('appinsightname')]",
                    "ResourceId": "[parameters('appinsightresourceid')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "traces\r\n| where customDimensions.eventId == 'RT0012'\r\n| where customDimensions.alObjectId > 0 // filter out internal server calls\r\n| extend aadID = tostring( customDimensions.aadTenantId )\r\n| extend sqlStatement = tostring( customDimensions.sqlStatement )\r\n| extend environmentName=cloud_RoleInstance \r\n, environmentType = tostring( customDimensions.environmentType )\r\n, alObjectId = customDimensions.alObjectId\r\n, alObjectName = tostring( customDimensions.alObjectName )\r\n, alObjectType = tostring( customDimensions.alObjectType )\r\n, alObject = strcat(customDimensions.alObjectType, ' - ',customDimensions.alObjectName)\r\n, clientType = tostring( customDimensions.clientType )\r\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \r\n, extensionName = tostring( customDimensions.extensionName )\r\n, extensionVersion = tostring( customDimensions.extensionVersion )\r\n, alStackTrace = tostring( customDimensions.alStackTrace )\r\n, snapshotId = tostring(customDimensions.snapshotId)\r\n, sessionId = tostring(customDimensions.sessionId)\r\n| where environmentType == 'Production'\r\n| summarize countOfExecutions = count() by extensionName, extensionVersion,alObject,  alStackTrace,snapshotId, sessionId\r\n| project extensionName, extensionVersion, alObject, sessionId, snapshotId,countOfExecutions,  alStackTrace\r\n| order by countOfExecutions desc\r\n\n",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appinsightname')]",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "value": "0ba5efed-3b7e-43b3-8637-e16a4811727a",
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "value": "P7D",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "AnalyticsGrid",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Database lock timed out",
                  "PartSubTitle": "Date filter",
                  "Query": "traces\n| where customDimensions.eventId == 'RT0012'\n| where customDimensions.alObjectId > 0 // filter out internal server calls\n| where customDimensions.environmentType == 'Production'\n| extend aadID = tostring( customDimensions.aadTenantId )\n| extend sqlStatement = tostring( customDimensions.sqlStatement )\n| extend environmentName=cloud_RoleInstance \n, environmentType = tostring( customDimensions.environmentType )\n, alObjectId = customDimensions.alObjectId\n, alObjectName = tostring( customDimensions.alObjectName )\n, alObjectType = tostring( customDimensions.alObjectType )\n, alObject = strcat(customDimensions.alObjectType, ' - ',customDimensions.alObjectName)\n, clientType = tostring( customDimensions.clientType )\n, executionTimeInMS = toreal(totimespan(customDimensions.executionTime))/10000 //the datatype for executionTime is timespan \n, extensionName = tostring( customDimensions.extensionName )\n, extensionVersion = tostring( customDimensions.extensionVersion )\n, alStackTrace = tostring( customDimensions.alStackTrace )\n, snapshotId = tostring(customDimensions.snapshotId)\n, sessionId = tostring(customDimensions.sessionId)\n| where environmentType == 'Production'\n| summarize countOfExecutions = count() by extensionName, extensionVersion,alObject,  alStackTrace,snapshotId, sessionId\n| project extensionName, extensionVersion, alObject, sessionId, snapshotId,countOfExecutions,  alStackTrace\n| order by countOfExecutions desc\n\n",
                  "GridColumnsWidth": {
                    "alStackTrace": "669px",
                    "alObject": "213px"
                  }
                }
              }
            }
          },
          "10": {
            "position": {
              "x": 0,
              "y": 25,
              "colSpan": 19,
              "rowSpan": 8
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "8c510a6c-fe3d-4ad7-99b8-09e455a4f02a",
                    "ResourceGroup": "[parameters('resourcegroupname')]",
                    "Name": "[parameters('appinsightname')]",
                    "ResourceId": "[parameters('appinsightresourceid')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "itemCount",
                      "type": "int"
                    },
                    "yAxis": [
                      {
                        "name": "Count",
                        "type": "long"
                      }
                    ],
                    "splitBy": [
                      {
                        "name": "name",
                        "type": "string"
                      }
                    ],
                    "aggregation": "Sum"
                  },
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "pageViews\r\n| where timestamp > ago(2d)\r\n| where  customDimensions.alObjectId > 0\r\n| summarize Count=sum(itemCount) by itemCount, name\r\n| order by Count desc\r\n| top 10 by Count\r\n| render columnchart\n",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appinsightname')]",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "value": "1580ba85-3ba6-4cf1-b995-27eb82873462",
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "FrameControlChart",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "value": "UnstackedColumn",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Top 20 Most Page Usage",
                  "PartSubTitle": "Date filter",
                  "Query": "pageViews\n| where  customDimensions.alObjectId > 0\n| where customDimensions.environmentType == 'Prod'\n| summarize Count=sum(itemCount) by itemCount, name\n| order by Count desc\n| top 20 by Count\n| render columnchart\n"
                }
              }
            }
          },
          "11": {
            "position": {
              "x": 0,
              "y": 33,
              "colSpan": 19,
              "rowSpan": 7
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "8c510a6c-fe3d-4ad7-99b8-09e455a4f02a",
                    "ResourceGroup": "[parameters('resourcegroupname')]",
                    "Name": "[parameters('appinsightname')]",
                    "ResourceId": "[parameters('appinsightresourceid')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "name",
                      "type": "string"
                    },
                    "yAxis": [
                      {
                        "name": "CountName",
                        "type": "long"
                      }
                    ],
                    "splitBy": [
                      {
                        "name": "performanceBucket",
                        "type": "string"
                      }
                    ],
                    "aggregation": "Sum"
                  },
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "pageViews\r\n| where timestamp > ago(30d)\r\n| where customDimensions.alObjectId <> -1\r\n| order by performanceBucket desc\r\n| summarize CountName=count() by name, performanceBucket, tostring(customDimensions.alObjectId)\r\n| top 20 by CountName\r\n| render columnchart \n",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appinsightname')]",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "value": "2c9caf29-061c-45cc-9125-64627a153ea3",
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "FrameControlChart",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "value": "StackedColumn",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Top 20 Slowest Pages",
                  "PartSubTitle": "Date filter",
                  "Query": "pageViews\n| where customDimensions.alObjectId <> -1\n| where customDimensions.environmentType == 'Prod'\n| order by performanceBucket desc\n| summarize CountName=count() by name, performanceBucket, tostring(customDimensions.alObjectId)\n| top 20 by CountName\n| render columnchart \n"
                }
              }
            }
          },
          "12": {
            "position": {
              "x": 0,
              "y": 40,
              "colSpan": 19,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "8c510a6c-fe3d-4ad7-99b8-09e455a4f02a",
                    "ResourceGroup": "[parameters('resourcegroupname')]",
                    "Name": "[parameters('appinsightname')]",
                    "ResourceId": "[parameters('appinsightresourceid')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "traces\r\n//| where timestamp > ago(7d)\r\n| where customDimensions.eventId == 'RT0006'\r\n| limit 100000\r\n| project numberOfRows = toint(customDimensions.numberOfRows)\r\n, sqlRowsRead = toint( customDimensions.sqlRowsRead )\r\n, sqlExecutes = toint( customDimensions.sqlExecutes )\r\n, alObjectName = tostring( customDimensions.alObjectName )\r\n, alObjectId = tostring( customDimensions.alObjectId )\r\n, extensionPublisher = tostring(customDimensions.extensionPublisher )\r\n| where isnotnull( sqlExecutes ) and isnotnull( sqlRowsRead )\r\n| summarize numberOfReportExecutions=count(), totalRows=sum(numberOfRows), totalSQLExecutes = sum(sqlExecutes), totalSQLRowsRead = sum(sqlRowsRead) by alObjectId, alObjectName\r\n| extend sqlratio = toreal(totalSQLRowsRead)/totalSQLExecutes\r\n, datasetratio = toreal(totalRows)/totalSQLExecutes\r\n| order by sqlratio asc\n",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appinsightname')]",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "value": "1194525a-5b1e-474c-aa83-3ce0a610b890",
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "value": "P1D",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "AnalyticsGrid",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Report - How Many SQL Rows are read per SQL Statement",
                  "PartSubTitle": "Date filter",
                  "Query": "// \n// top 10 reports that have a low sqlratio\n// \n// The higher the number called sqlratio is, the more set-based the report is (it tells you how many sql rows are read per sql statement)\n\ntraces\n| where customDimensions.eventId == 'RT0006'\n| where customDimensions.environmentType == 'Production'\n| limit 1000\n| project numberOfRows = toint(customDimensions.numberOfRows)\n, sqlRowsRead = toint( customDimensions.sqlRowsRead )\n, sqlExecutes = toint( customDimensions.sqlExecutes )\n, alObjectName = tostring( customDimensions.alObjectName )\n, alObjectId = tostring( customDimensions.alObjectId )\n, extensionPublisher = tostring(customDimensions.extensionPublisher )\n| where isnotnull( sqlExecutes ) and isnotnull( sqlRowsRead )\n| summarize numberOfReportExecutions=count(), totalRows=sum(numberOfRows), totalSQLExecutes = sum(sqlExecutes), totalSQLRowsRead = sum(sqlRowsRead) by alObjectId, alObjectName\n| extend sqlratio = toreal(totalSQLRowsRead)/totalSQLExecutes\n, datasetratio = toreal(totalRows)/totalSQLExecutes\n| order by sqlratio asc\n",
                  "GridColumnsWidth": {
                    "alObjectName": "317px"
                  }
                }
              }
            }
          },
          "13": {
            "position": {
              "x": 0,
              "y": 44,
              "colSpan": 19,
              "rowSpan": 6
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "8c510a6c-fe3d-4ad7-99b8-09e455a4f02a",
                    "ResourceGroup": "[parameters('resourcegroupname')]",
                    "Name": "[parameters('appinsightname')]",
                    "ResourceId": "[parameters('appinsightresourceid')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "customDimensions_alObjectName",
                      "type": "string"
                    },
                    "yAxis": [
                      {
                        "name": "Count",
                        "type": "long"
                      }
                    ],
                    "splitBy": [],
                    "aggregation": "Sum"
                  },
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "traces\r\n| where timestamp > ago(7d)\r\n| where customDimensions.eventId == 'RT0006'\r\n| where  customDimensions.alObjectId > 0\r\n| summarize Count=sum(itemCount) by tostring(customDimensions.alObjectName)\r\n| order by Count asc\r\n| top 20 by Count\r\n| render columnchart\n",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appinsightname')]",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "value": "6d8995f6-bb92-4f2c-b113-a3500b42b42e",
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "FrameControlChart",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "value": "StackedColumn",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Top 20 Most Report Usage",
                  "PartSubTitle": "Date filter",
                  "Query": "traces\n| where customDimensions.eventId == 'RT0006'\n| where customDimensions.environmentType == 'Production'\n| where  customDimensions.alObjectId > 0\n| summarize Count=sum(itemCount) by tostring(customDimensions.alObjectName)\n| order by Count asc\n| top 20 by Count\n| render columnchart\n"
                }
              }
            }
          },
          "14": {
            "position": {
              "x": 0,
              "y": 50,
              "colSpan": 19,
              "rowSpan": 6
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "8c510a6c-fe3d-4ad7-99b8-09e455a4f02a",
                    "ResourceGroup": "[parameters('resourcegroupname')]",
                    "Name": "[parameters('appinsightname')]",
                    "ResourceId": "[parameters('appinsightresourceid')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "customDimensions_alObjectName",
                      "type": "string"
                    },
                    "yAxis": [
                      {
                        "name": "AvgTimeMS",
                        "type": "real"
                      }
                    ],
                    "splitBy": [],
                    "aggregation": "Sum"
                  },
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "traces\r\n| where timestamp > ago(7d)\r\n| where customDimensions.eventId == 'RT0006'\r\n| where  customDimensions.alObjectId > 0\r\n| summarize Count=sum(itemCount), TotalTimeMS=sum(toreal(totimespan(customDimensions.totalTime))/10000) by tostring(customDimensions.alObjectName)\r\n| top 20 by Count\r\n| extend AvgTimeMS=TotalTimeMS/Count\r\n| order by AvgTimeMS\r\n| render columnchart  \n",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appinsightname')]",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "value": "74d6f016-31cc-4788-9a37-b233070a0fca",
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "FrameControlChart",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "value": "UnstackedColumn",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Top 20 Avg excecution Time Reports",
                  "PartSubTitle": "Date filter",
                  "Query": "traces\n| where customDimensions.eventId == 'RT0006'\n| where customDimensions.environmentType == 'Production'\n| where  customDimensions.alObjectId > 0\n| summarize Count=sum(itemCount), TotalTimeMS=sum(toreal(totimespan(customDimensions.totalTime))/10000) by tostring(customDimensions.alObjectName)\n| top 20 by Count\n| extend AvgTimeMS=TotalTimeMS/Count\n| order by AvgTimeMS\n| render columnchart  \n"
                }
              }
            }
          }
        }
      }
    },
    "metadata": {
      "model": {
        "timeRange": {
          "value": {
            "relative": {
              "duration": 24,
              "timeUnit": 1
            }
          },
          "type": "MsPortalFx.Composition.Configuration.ValueTypes.TimeRange"
        },
        "filterLocale": {
          "value": "nl-nl"
        },
        "filters": {
          "value": {
            "MsPortalFx_TimeRange": {
              "model": {
                "format": "utc",
                "granularity": "auto",
                "relative": "30d"
              },
              "displayCache": {
                "name": "UTC Time",
                "value": "Past 30 days"
              },
              "filteredPartIds": [
                "StartboardPart-AnalyticsPart-cab5d94b-8aff-4a58-990d-cb501e1f91b9",
                "StartboardPart-AnalyticsPart-cab5d94b-8aff-4a58-990d-cb501e1f91bb",
                "StartboardPart-AnalyticsPart-cab5d94b-8aff-4a58-990d-cb501e1f91bd",
                "StartboardPart-AnalyticsPart-cab5d94b-8aff-4a58-990d-cb501e1f91bf",
                "StartboardPart-AnalyticsPart-cab5d94b-8aff-4a58-990d-cb501e1f91c1",
                "StartboardPart-AnalyticsPart-cab5d94b-8aff-4a58-990d-cb501e1f91c3",
                "StartboardPart-AnalyticsPart-cab5d94b-8aff-4a58-990d-cb501e1f91c5",
                "StartboardPart-AnalyticsPart-cab5d94b-8aff-4a58-990d-cb501e1f91c7",
                "StartboardPart-AnalyticsPart-cab5d94b-8aff-4a58-990d-cb501e1f91c9",
                "StartboardPart-AnalyticsPart-cab5d94b-8aff-4a58-990d-cb501e1f91cb",
                "StartboardPart-AnalyticsPart-cab5d94b-8aff-4a58-990d-cb501e1f91cd",
                "StartboardPart-AnalyticsPart-cab5d94b-8aff-4a58-990d-cb501e1f91cf",
                "StartboardPart-AnalyticsPart-cab5d94b-8aff-4a58-990d-cb501e1f91d1",
                "StartboardPart-AnalyticsPart-cab5d94b-8aff-4a58-990d-cb501e1f91d3",
                "StartboardPart-AnalyticsPart-cab5d94b-8aff-4a58-990d-cb501e1f91d5"
              ]
            }
          }
        }
      }
    }
  },
  "name": "4PSConstruct",
  "type": "Microsoft.Portal/dashboards",
  "location": "[parameters('resourcelocation')]",
  "tags": {
    "hidden-title": "4PS Construct"
  },
  "apiVersion": "2015-08-01-preview"
}
 ],
 "outputs": {}
}
